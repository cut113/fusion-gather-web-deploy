(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{5571:function(e,t,s){Promise.resolve().then(s.bind(s,3362))},3362:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var r=s(7437),a=s(2265),n=s(9882),l=s(7523),o=s(8282),c=s(1199),i=s(8110),d=s(1865),u=s(5925),m=e=>{let{onSuccess:t,accountInfo:s}=e,[m,f]=(0,a.useState)(!1);console.log("check render");let{register:x,handleSubmit:b,formState:{errors:p}}=(0,d.cI)({defaultValues:{email:""},resolver:(0,i.F)(c.zW)}),h=async e=>{f(!0),console.log("check check");try{let a=await (0,o.Kd)(null==e?void 0:e.email);if(console.log("res",a),404===a.status||404===a.statusCode)u.default.error(null==a?void 0:a.message);else{var r;s(null==a?void 0:null===(r=a.user)||void 0===r?void 0:r.email),t()}}catch(e){console.log(e)}finally{f(!1)}};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("form",{onSubmit:b(h),className:"flex flex-col gap-6 items-center",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-5",children:[(0,r.jsx)("h3",{className:"text-3xl font-bold",children:"Reset your password"}),(0,r.jsx)("span",{className:"font-medium text-lg text-center text-secondary",children:"Don't worry! It occurs. Please enter the email address linked with your account."})]}),(0,r.jsx)(l.Z,{id:"email",label:"Email",disabled:m,register:x,errors:p,required:!0}),(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(n.Z,{disabled:m,fullWidth:!0,type:"submit",children:m?"loading...":"Send Code"})})]})})},f=s(7145),x=s(4033),b=e=>{let{accountInfo:t}=e,s=(0,x.useRouter)(),[m,f]=(0,a.useState)(!1),{register:b,handleSubmit:p,formState:{errors:h}}=(0,d.cI)({defaultValues:{newPassword:"",confirmPassword:""},resolver:(0,i.F)(c.Ag)}),g=async e=>{f(!0),console.log(">>>check data: ",e);try{await (0,o.oK)(t,e.newPassword)?(u.default.success("Succeed!"),s.push("/login")):u.default.error("Failed!")}catch(e){console.log(e)}finally{f(!1)}};return(0,r.jsxs)("form",{onSubmit:p(g),className:"flex flex-col gap-6 items-center",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-5",children:[(0,r.jsx)("h3",{className:"text-3xl font-bold",children:"Create a New Password"}),(0,r.jsx)("span",{className:"font-medium text-lg text-secondary",children:"Your new password must be unique from those previously used."})]}),(0,r.jsx)(l.Z,{id:"newPassword",label:"New Password",type:"password",disabled:m,register:b,errors:h,required:!0}),(0,r.jsx)(l.Z,{id:"confirmPassword",label:"Confirm Password",type:"password",disabled:m,register:b,errors:h,required:!0}),(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(n.Z,{disabled:m,fullWidth:!0,type:"submit",children:m?"loading...":"Reset Password"})})]})},p=()=>{let[e,t]=(0,a.useState)("reset"),[s,n]=(0,a.useState)("");return(0,r.jsxs)(r.Fragment,{children:["reset"===e&&(0,r.jsx)(m,{onSuccess:()=>{t("verify")},accountInfo:e=>{n(e)}}),"verify"===e&&(0,r.jsx)(f.Z,{type:"reset",onSuccess:()=>{t("createNew")},accountInfo:s}),"createNew"===e&&(0,r.jsx)(b,{accountInfo:s})]})}},7145:function(e,t,s){"use strict";s.d(t,{Z:function(){return m}});var r=s(7437),a=s(2265),n=e=>{let{currentTime:t,isRunning:s}=e,[n,l]=(0,a.useState)(t);(0,a.useEffect)(()=>{if(!s)return;let e=setInterval(()=>{let[t,s]=n.split(":").map(Number);s>0?l("".concat(t.toString().padStart(2,"0"),":").concat((s-1).toString().padStart(2,"0"))):t>0?l("".concat((t-1).toString().padStart(2,"0"),":59")):clearInterval(e)},1e3);return()=>{clearInterval(e)}},[n,s]);let o=0===Number(n.split(":")[0])&&5>=Number(n.split(":")[1]);return(0,r.jsx)("div",{className:o?"text-rose-500":"text-secondary",children:n})},l=s(9882),o=s(8282),c=s(4033),i=s(1865),d=s(5925),u=s(2510),m=e=>{let{onSuccess:t,accountInfo:s,type:m}=e,f=(0,c.useRouter)(),[x,b]=(0,a.useState)(!1),[p,h]=(0,a.useState)(!0),g=(0,a.useRef)([...Array(6)].map(()=>a.createRef()));console.log("check :",s);let{handleSubmit:y,control:w}=(0,i.cI)({defaultValues:{number1:"",number2:"",number3:"",number4:"",number5:"",number6:""}}),j=async e=>{b(!0);let r=Object.keys(e).sort().map(t=>e[t]).join("");try{if("reset"===m)await (0,o.YQ)(s,r)?(h(!1),t()):d.default.error("Failed!");else if("verifyCode"===m){let e=await (0,o.Jy)(s,r);console.log(">>>check Verification code:",e),404===e.status?d.default.error(null==e?void 0:e.message):(h(!1),d.default.success("Verified!"),f.push("/login"))}}catch(e){console.log(e)}finally{b(!1)}};return(0,r.jsxs)("form",{onSubmit:y(j),className:"flex flex-col gap-6 items-center relative",children:[(0,r.jsx)("div",{className:"absolute left-0 top-1 cursor-pointer",children:(0,r.jsx)(u.Wuc,{size:"28px"})}),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-5",children:[(0,r.jsx)("h3",{className:"text-3xl font-bold",children:"Code Verification"}),(0,r.jsx)("span",{className:"font-medium text-lg text-secondary",children:"Enter the verification code we just sent on your email address."})]}),(0,r.jsx)("span",{className:"text-primary font-bold text-xl my-10",children:"The mail was sent succesfuly!"}),(0,r.jsx)("div",{className:"flex gap-5",children:[...Array(6)].map((e,t)=>(0,r.jsx)(i.Qr,{name:"number".concat(t+1),control:w,defaultValue:"",render:e=>{let{field:s,fieldState:a}=e;return(0,r.jsx)("input",{...s,maxLength:1,autoComplete:"off",className:"w-[43px] h-[43px] border-2 outline-none border-black rounded-md text-center font-bold text-2xl",autoFocus:0===t,ref:g.current[t],onChange:e=>{s.onChange(e),""!==e.target.value&&t<5&&g.current[t+1].current.focus()}})}},t))}),(0,r.jsxs)("div",{className:"flex gap-1 text-secondary text-sm mb-10",children:[(0,r.jsx)("span",{children:"The email will be resent in "}),(0,r.jsx)(n,{currentTime:"00:59",isRunning:p})]}),(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(l.Z,{disabled:x,fullWidth:!0,type:"submit",children:x?"loading...":"Confirm"})})]})}},9882:function(e,t,s){"use strict";var r=s(7437);t.Z=e=>{let{type:t="button",fullWidth:s,children:a,onClick:n,secondary:l,danger:o,disabled:c}=e;return(0,r.jsx)("button",{onClick:n,type:t,disabled:c,className:"flex justify-center rounded-md px-3 py-4 text-base font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 border-2 border-black hover:opacity-75    \n                ".concat(c&&"opacity-50 cursor-default","\n                ").concat(s&&"w-full","\n                ").concat(l?"text-gray-300":"text-black","\n                ").concat(o&&"bg-rose-500 hover:bg-rose-600 focus-visible:outline-rose-600","\n                ").concat(!l&&!o&&"bg-primary hover:opacity-50 ","\n            "),children:a})}},7523:function(e,t,s){"use strict";var r=s(7437);t.Z=e=>{var t;let{label:s,id:a,register:n,required:l,errors:o,type:c="text",disabled:i,width:d}=e;return(0,r.jsxs)("div",{className:"w-full relative",children:[(0,r.jsx)("input",{id:a,type:c,placeholder:"",autoComplete:"off",disabled:i,...n(a,{required:l}),className:"py-2 px-4 pt-6 outline-none  border-2 rounded-md transition disabled:opacity-70 disabled:cursor-not-allowed peer text-gray-600 bg-white font-light ".concat(o&&o[a]?"border-rose-400 focus:border-rose-400":"border-black focus:border-black"," ").concat(i&&"opacity-50 cursor-default","\n                ").concat(d||"w-full","\n                ")}),o&&o[a]&&(0,r.jsx)("p",{className:"text-sm text-rose-400",children:"".concat(null===(t=o[a])||void 0===t?void 0:t.message)}),(0,r.jsx)("label",{className:"absolute cursor-text text-md duration-150 transform -translate-y-3 top-5 z-10 origin-[0] left-4 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4 ".concat(o&&o[a]?"text-rose-500":"text-secondary"),htmlFor:a,children:s})]})}},8282:function(e,t,s){"use strict";s.d(t,{Jy:function(){return l},Kd:function(){return o},YQ:function(){return c},av:function(){return n},oK:function(){return a}}),s(5355);var r=s(1162),a=(0,r.$)("d7b8cc64365f808a7dee612fc9770510ae2e6662"),n=(0,r.$)("3e44c9e2b1a4becc0f8720a2fa3a59f71401f742"),l=(0,r.$)("9deaccb1404872e083231e40dc7f36879ab07f0b"),o=(0,r.$)("c4c23d452408b7c5e20be2ce476465f76702ccca"),c=(0,r.$)("596863fdb9e996b48695be713a90ac6e74021014")},1199:function(e,t,s){"use strict";s.d(t,{Ag:function(){return l},IY:function(){return a},pj:function(){return n},zW:function(){return o}});var r=s(4578);let a=r.z.object({firstName:r.z.string().min(1,"FirstName is required!").min(2).max(30),lastName:r.z.string().min(1,"LastName is required!").min(2).max(30),email:r.z.string().min(1,"Email is required!").email(),username:r.z.string().min(1,"Username is required!").min(2).max(30),password:r.z.string().min(6,"The password must contain at least 6 characters."),dob:r.z.string().min(8,"Please enter DOB yyyy/mm/dd "),phoneNumber:r.z.string().regex(/^\d{10}$/,"Invalid Number!")}),n=r.z.object({username:r.z.string().min(1,"Username is required!").min(2).max(30),password:r.z.string().min(6,"The password must contain at least 6 characters.")}),l=r.z.object({newPassword:r.z.string().min(1,"Please enter your new password").min(6,"The password must contain at least 6 characters."),confirmPassword:r.z.string().min(1,"Please comfirm password.")}).refine(e=>e.newPassword===e.confirmPassword,{message:"Passwords do not match!",path:["confirmPassword"]}),o=r.z.object({email:r.z.string().min(1,"Email is required!").email()})}},function(e){e.O(0,[306,53,971,938,744],function(){return e(e.s=5571)}),_N_E=e.O()}]);